<!--TEMP-->
<link href="css/buttons.css" rel="stylesheet">


<style type="text/css">
/*partner site html*/
#htmltemplate { height: 500px; font-family: courier new; }
html, body  {margin: 0px; padding: 0px; border: 0px; text-align: left; text-align: left !important; line-height: 1.3;}

/*results container*/
#resultsBox {position: relative; margin: 0; padding:0px; background: #fff; font-family:Arial, Helvetica, sans-serif; font-size: 12px; -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; border: 1px solid #ddd; display:block; overflow: hidden; }
/*results container link control*/
#resultsBox a.resultsLink {color: #1F85CB; text-decoration: underline; font-size:13px;} 
#resultsBox a.resultsLink:hover {color:#9AE2F9;}

#resultsBox #headerBox	{padding: 0px 0px 0px 11px; background: #fff;}
#resultsBox #headerBox h1 {margin:0px 0px 3px 0px; padding:0px; font-size: 14px; color: #0D3D78; float: left; display: block; background: transparent; line-height:1.3em;}
/*optional grainular headline control*/
#resultsBox #headerBox h1.headline {}
/*optional: image icon(s) nested inside header*/
#resultsBox #headerBox .headerIcons {float:left; margin:0px; padding:0px; background:none; display: none;}

#resultsBox #results {margin: 1px; padding: 3px; background: #fff; border: 0px; visibility: hidden;}	
#resultsBox #results table { width: 100%; }
#resultsBox #results th {font-weight: bold; color: #333; padding: 0px 7px; text-align: left; font-size: 12px;}
#resultsBox #results td {padding: 1px 7px;}
#resultsBox #resultsBox .clear {clear: both; height: 1px;}
#resultsBox #results .logo-link {border: none;  zoom: 1;}
#resultsBox #results .logo-link img {zoom: 1;}
#resultsBox #results p {margin: 0; padding: 0 0 5px;  zoom: 1;}
#resultsBox #results .allrecords {line-height: 19px; font-size: 12px; float: right; zoom: 1;}


/*results call to action text link case*/
#resultsBox #results a.goLink {display: block;
  color: #1F85CB;
  font-size:12px;
  vertical-align: middle;
  margin-top:1px;
  font-weight: normal;
  padding-left: 9px;
}
#resultsBox #results a.goLink:hover {color:#9AE2F9;}

/*link under table results case*/
#resultsBox #results a.clickMore {
  display:;
  margin-left: 7px;
  padding: 2px;
  text-align: right;
  font-size: 13px;
  color: #0D3D78;
}
#resultsBox #results a.clickMore .chevron {
	letter-spacing:-1.1em; padding-left: 8px;
}

h1 #headerName, h1 #headerState {color: #0591C7; text-transform: capitalize;}

/*optional: absolute positioned powered by logo box*/
#resultsBox .logobox {border: none; position:absolute; display: inline; top: 2%; left: 64%; width: 150px;
}
/*optional:powered by text*/
#resultsBox .poweredBy {font-size:11px; color:#111; display: inline;
}
#resultsBox .brandText {font-size: 13px; color: #111; display: inline;
}


/*brand specific styles to appear within logospace*/
#resultsBox .brand-ac {background:/*  url(insert link to Archives logo   */ no-repeat; }
#resultsBox .brand-ps {background:/*  url(insert link to PeopleSmart logo   */ no-repeat;}
/*brand specification for Archives & PeopleSmart in same ad*/
#resultsBox .brand-sponsored {background:/*  url(insert link to sponsored by logo   */ no-repeat; width:80px; height: 20px;}

/*loading message*/
#loading {
  text-align: center;
  padding-top: 20px;
  color: #888;
  text-style: italic;
}


/**** Search box styles ****/

#searchbox {
  /* By default we don't show the search box */
  display: none;
  padding-left: 10px;
  padding-top: 20px;
  padding-bottom: 20px;
}

#searchbox div.input {
  float: left;
  padding-left: 3px;
  padding-right: 3px;
}

#searchbox div.input label {
  display: block;
  font-size: 10px;
}

#searchbox div.input input[type=text] {
  width: 110px;
  border: solid 1px #CCC;
  padding: 3px;
}

#searchbox div.input select {
  width: 110px;
}

#searchbox div#submit_holder {
  width: 186px;
  float: right;
  padding-top: 5px;
  padding-right: 25px;
}

/**** /Search box styles ****/

</style>

<div id="resultsBox">
  <div id="headerBox">
    <div class="headerIcons">&#160;</div><h1 id="headline">Search for Contact Information</h1>
    <div class="clear"></div>	
  </div>
	<div id="results" style="visibility: visible;">
		<table>
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Age</th>
		    <th>Location</th>
		    <th>&nbsp;</th>
		  </tr>
		</thead>
		<tbody id="results-holder">
		<!--example results rows-->
		<tr>
		<td><a class="resultsLink" target="_blank" href="#">Paul C Goins</a></td>
		<td><a class="resultsLink" target="_blank" href="#">39</a></td>
		<td><a class="resultsLink" target="_blank" href="#">Middletown, NJ</a></td>
		<td><a target="_blank" href="#" class="button tiny nice blue round">View Report</a></td>
		</tr>
		<tr>
		<td><a class="resultsLink" target="_blank" href="#">Paul K Goins</a></td>
		<td><a class="resultsLink" target="_blank" href="#">39</a></td>
		<td><a class="resultsLink" target="_blank" href="#">Muncie, IN</a></td>
		<td><a target="_blank" href="#" class="button tiny nice blue round">View Report</a></td>
		</tr>
		<tr>
		<td><a class="resultsLink" target="_blank" href="#">Paul R Goins</a></td>
		<td><a class="resultsLink" target="_blank" href="#">49</a></td>
		<td><a class="resultsLink" target="_blank" href="#">Conroe, TX</a></td>
		<td><a target="_blank" href="#" class="goLink">View Report</a></td>
		</tr>
		<!--end example results rows-->
		</tbody>
		</table>
		<a class="clickMore">Click here to view all results <span class="chevron">&#62;&#62;</span></a> 
	<!--example logo space, example brand Archives-->
	<div class="logobox brand-ac"><span class="poweredBy">powered by </span><span class="brandText">PeopleSmart</span></div>   
	</div>
  
  <div id="searchbox">
    <form name="search_form" id="search_form" target="_top" action="http://www.peoplesmart.com/">
      <input type="hidden" id="_act" name="_act" />
      <input type="hidden" name="search" value="name" />
      <div class="input">
        <label for="firstName">
          First Name
        </label>
        <input type="text" name="firstName" id="firstName" />
      </div>
      <div class="input">
        <label for="lastName">
          Last Name
        </label>
        <input type="text" name="lastName" id="lastName" />
      </div>
      <div class="input">
        <label for="city">
          City
        </label>
        <input type="text" name="city" id="city" />
      </div>
      <div class="input">
        <label for="state">
          State
        </label>
        <select name="state" id="state"></select>
      </div>
      <div class="input" id="submit_holder">
        <input type="image" src="http://psp.s3.amazonaws.com/buttons/search_yellow_186x40.gif" onmouseover="this.src='http://psp.s3.amazonaws.com/buttons/search_orange_186x40.gif'" onmouseout="this.src='http://psp.s3.amazonaws.com/buttons/search_yellow_186x40.gif'" />
      </div>
      <div class="clear"></div>
      
      <input type="hidden" id="aff" name="66" />
      <input type="hidden" id="tid" name="PeoplePageWidgetH150_A" />
      <input type="hidden" id="cam" name="" />
      <input type="hidden" id="utm_content" name="PeoplePageWidgetH150_A" />
      <input type="hidden" id="utm_campaign" name="PeoplePages" />
      <input type="hidden" id="utm_medium" name="Advertising" />
      <input type="hidden" id="utm_source" name="coporationwiki.com" />
    </form>
  </div>
</div>

<!--
  This script template contains the html for a single row of results.
  The variables are:
    $href     - Where the hyperlink will point to.
    $target   - What window the hyperlink will open in (default is _blank).
    $name     - Full name of the person.
    $age      - Age of the person (or "N/A").
    $location - City+State of the person.
-->
<script type="text/template" id="result-item">
<!-- ignore -->
<table><tbody>
<!-- /ignore -->

  <tr>
    <td><a href="$href" target="$target">$name</a></td>
    <td><a href="$href" target="$target">$age</a></td>
    <td><a href="$href" target="$target">$location</a></td>
    <td><a class="callToAction" href="$href" target="$target">View</a></td>
  </tr>

<!-- ignore -->
</tbody></table>
<!-- /ignore -->
</script>

<script type="text/javascript">
var url_params = {
"_act": "loadinggo",
"utm_source": "corporationwiki.com", 
"utm_medium": "Advertising", 
"utm_content": "PeoplePageWidgetH150_A", 
"utm_campaign": "PeoplePages",
"tid": "PeoplePageWidgetH150_A", 
"cam": "",
"aff": "66"
};

(function(){
  var RPC_DOMAIN = "a.peoplesearchads.com";
  // Adjust the 'max_results' variable to control how many results will appear:
  var max_results = 3;
  
  var $ = function(id){return document.getElementById(id)};
  var $t = function(tag){return document.getElementsByTagName(tag)};
  var $c = function(cls) {
    var out = [ ];
    var tags = $t("*");
    for( var i = 0; i < tags.length; i++ )
      if( tags[i].className.toString() == cls )
        out.push( tags[i] );
    return out;
  };
  var grep = function(func, arr) {
    var out = [ ];
    for( var i = 0; i < arr.length; i++ )
      if( func( arr[i] ) )
        out.push( arr[i] );
    return out;
  };
  var map = function(func, arr) {
    var out = [ ];
    for( var i = 0; i < arr.length; i++ )
      out.push( func(arr[i]) );
    return out;
  };
  var body = $t("BODY")[0];
  body.style.textAlign = "left";
  
    var qs = (function () {
        var querystring = (function () {
            try {
                if (/^https?:\/\/(www\.tsr\.local|tsr\-api\.psm\.local)/.test(top.document.location.href)) {
                    RPC_DOMAIN = top.document.location.hostname;
                    return top.document.location.toString().split(/\?/)[1];
                }
                else {
                    var refQS = document.referrer.toString().split(/\?/)[1];
                    var myQS = document.location.toString().split(/\?/)[1];
                    var parts = new Array();
                    if (String(refQS).length > 0) parts.push(refQS);
                    if (String(myQS).length > 0) parts.push(myQS);
                    return parts.join("&");
                } // end if()
            }
            catch (e) {
                var refQS = document.referrer.toString().split(/\?/)[1];
                var myQS = document.location.toString().split(/\?/)[1];
                var parts = new Array();
                if (String(refQS).length > 0) parts.push(refQS);
                if (String(myQS).length > 0) parts.push(myQS);
                return parts.join("&");
            } // end try:
        })();
        if (typeof querystring == "undefined") querystring = "";
        return querystring;
    })();

    var q = function (arg) {
        var querystring = qs;
        var params = querystring.split(/&/);
        for (var i = 0; i < params.length; i++) {
            var param = params[i].toString().split(/\=/);
            var key = unescape(param[0]).replace(/\+/g, " ");
            if (key.toLowerCase() == arg.toLowerCase()) {
                var val = unescape(param[1]).replace(/\+/g, " ");
                if (typeof val == "undefined" || val == "undefined")
                    val = "";
                return val;
            } // end if()
        } // end for()

        return "";
    }; // end q(arg)

    var args = (function () {
        var parts = qs.split(/&/);
        var out = [];
        for (var i = 0; i < parts.length; i++) {
            var part = parts[i].toString().split(/\=/);
            out[unescape(part[0])] = unescape(part[1]);
        } // end for()
        return out;
    })();

    var ucfirst = function (str) {
        if (typeof str == "undefined") return "";
        if (str.toString().length <= 0) return "";
        if( str.toString().toLowerCase() == "undefined" ) return "";
        var parts = str.toString().toLowerCase().split("");
        parts[0] = parts[0].toString().toUpperCase();
        return parts.join("");
    }; // end ucfirst( str )
  
  var xssreq = function( url, callback ) {
    var head = $t("HEAD")[0];
    var scr = document.createElement("SCR" + "IPT");
    scr.setAttribute("type", "text/javascript");
    var id = "__callback-" + Math.random();
    url += url.indexOf("?") > -1 ? "&id=" + id : "?id=" + id;
    scr.setAttribute("src", url);
    var interval; interval = setInterval(function() {
      if( ! $(id) ) return;
      clearInterval(interval);
      var data = eval( $(id).innerHTML );
      return callback( data );
    }, 500);
    head.appendChild( scr );
  };
  
  var ps_url = function(inf) {
    var parts = [
      "_act=" + url_params._act,
      "search=name"
    ];
    map(function(el) {
      parts.push(el + "=" + unescape( q(el) || inf[el] ) );
    }, grep(function(el){
      return q(el) || ( typeof inf[el] != "undefined" && inf[el] != "" )
    }, [
      "firstName", "middleName", "lastName",
      "age", "dateRangeStart", "dateRangeEnd",
      "ZIPCode", "city", "state"
    ]));
    
    parts.push("utm_source=" + url_params.utm_source);
    parts.push("utm_medium=" + url_params.utm_medium);
    parts.push("utm_content=" + url_params.utm_content);
    parts.push("utm_campaign=" + url_params.utm_campaign);
    parts.push("tid=" + url_params.tid);
    parts.push("cam=" + url_params.cam);
    parts.push("aff=" + url_params.aff);
    
    return "http://www.peoplesmart.com/psp.aspx?" + parts.join("&");
  };

  var states = {
    AL: { name: "Alabama"},
    AK: { name: "Alaska" },
    AZ: { name: "Arizona" },
    AR: { name: "Arkansas" },
    CA: { name: "California" },
    CO: { name: "Colorado" },
    CT: { name: "Connecticut" },
    DE: { name: "Delaware" },
    FL: { name: "Florida" },
    GA: { name: "Georgia" },
    HI: { name: "Hawaii" },
    ID: { name: "Idaho" },
    IL: { name: "Illinois" },
    IN: { name: "Indiana" },
    IA: { name: "Iowa" },
    KS: { name: "Kansas" },
    KY: { name: "Kentucky" },
    LA: { name: "Louisiana" },
    ME: { name: "Maine" },
    MD: { name: "Maryland" },
    MA: { name: "Massachusetts" },
    MI: { name: "Michigan" },
    MN: { name: "Minnesota" },
    MS: { name: "Mississippi" },
    MO: { name: "Missouri" },
    MT: { name: "Montana" },
    NE: { name: "Nebraska" },
    NV: { name: "Nevada" },
    NH: { name: "New Hampshire" },
    NJ: { name: "New Jersey" },
    NM: { name: "New Mexico" },
    NY: { name: "New York" },
    NC: { name: "North Carolina" },
    ND: { name: "North Dakota" },
    OH: { name: "Ohio" },
    OK: { name: "Oklahoma" },
    OR: { name: "Oregon" },
    PA: { name: "Pennsylvania" },
    RI: { name: "Rhode Island" },
    SC: { name: "South Carolina" },
    SD: { name: "South Dakota" },
    TN: { name: "Tennessee" },
    TX: { name: "Texas" },
    UT: { name: "Utah" },
    VT: { name: "Vermont" },
    VA: { name: "Virginia" },
    WA: { name: "Washington" },
    DC: { name: "Washington D.C." },
    WV: { name: "West Virginia" },
    WI: { name: "Wisconsin" },
    WY: { name: "Wyoming" }
  };
  
  try {
    if( q('state') != "" && typeof states[q('state').toUpperCase()] != "undefined" )
    {
      var inTag = document.createElement("SPAN");
      inTag.innerHTML = "in&nbsp;";
      $("headerName").parentNode.insertBefore( inTag, $("headerState") );
      $("headerState").innerHTML = states[q('state').toUpperCase()].name;
    }// end if()
  }
  catch(e) {
    // Do nothing:
  }
  
  // Update the "Click to see more on PeopleSmart" link:
  var clickMore = $c("clickMore")[0];
  var url = ps_url({});
  clickMore.setAttribute("href", url);
  clickMore.setAttribute("target", q("target") || "_blank");

  xssreq("//" + RPC_DOMAIN + "/search/name/?site=PS&max_results=" + max_results + "&" + qs, function(data) {
    $("loading").parentNode.removeChild( $("loading") );
    
    if( ( ! data ) || typeof data == "undefined" || data.length <= 0 )
    {
      // We got no results - show the search form instead:
      $("results").style.display = "none";
      $("searchbox").style.display = "block";
      // Populate the state select box:
      $("state").innerHTML = "";
      $("state").options[0] = new Option("Nationwide","US");
      for( el in states )
        $("state").options[$("state").options.length] = new Option(states[el].name,el);
      for( el in $("state").options )
        if( $("state").options[el].value == q('state').toUpperCase() )
          $("state").options[el].selected = true;
      $("firstName").value = ucfirst( q('firstName') );
      $("lastName").value = ucfirst( q('lastName') );
      $("city").value = ucfirst( q('city') );
      $("_act").value = url_params._act;
      $("utm_source").value = url_params.utm_source;
      $("utm_medium").value = url_params.utm_medium;
      $("utm_content").value = url_params.utm_content;
      $("utm_campaign").value = url_params.utm_campaign;
      $("tid").value = url_params.tid;
      $("cam").value = url_params.cam;
      $("aff").value = url_params.aff;
      return;
    }// end if()
    
    $("headline").innerHTML = "Select a name below to get Email Address and Full Background Report:";
    $("results").style.visibility = "visible";
    
    for( var i = 0; i < data.length; i++ )
    {
      var res = data[i];
      var tpt = $("result-item").innerHTML.toString();
      
      // Find the location:
      var addr = grep(function(el){return parseInt(el.IsPrimary) == 1}, res.addresses.address)[0] || null;
      res.location = addr ? addr.cityState || "N/A" : "N/A";
      addr = addr || { };
      var obj = {
        firstName:    res["firstName"] || "",
        lastName:     res["lastName"] || "",
        middleName:   res["middleName"] || "",
        age:          res["age"] || "",
        city:         addr["city"] || "",
        state:        addr["state"] || "",
        ZIPCode:      addr["postalCode"] || "",
        utm_content:  url_params.utm_content || "PeoplePageWidgetH150_A",
        utm_campaign: url_params.utm_campaign || "PeoplePages",
        utm_medium:   url_params.utm_medium || "Advertising",
        utm_source:   url_params.utm_source || "corporationwiki.com",
        tid:          url_params.tid || "PeoplePageWidgetH150_A",
        aff:          url_params.aff || "66",
        cam:          url_params.cam || ""
      };
      
      var url = ps_url(obj);
      if( res.location == ", " ) res.location = "";

      // Do our variable replacements:
      tpt = tpt
        .replace(/\$name/ig, res.fullName)
        .replace(/\$age/ig, parseInt(res.age) ? res.age : "N/A")
        .replace(/\$location/ig, res.location || "N/A")
        .replace(/\$href/ig, url)
        .replace(/\$target/ig, q('target') || "_blank");
      
      var tbody = $("results").getElementsByTagName("TBODY")[0];
      
      // To make IE work, we have to use the TR tag from a throw-away table
      // and appendChild that to the tbody in the real table:
      var fake = document.createElement("DIV");
      fake.innerHTML = tpt;
      var tr = fake.getElementsByTagName("TR")[0];
      tbody.appendChild( tr );
    }// end for()
  });
})();
</script>